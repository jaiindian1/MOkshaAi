<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moksha AI: Universal Dharma Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@google/genai@0.1.0/dist/index.min.js"></script> 
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f3e8; /* Light sand/saffron background */
        }
        .moksha-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 24px;
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .om-symbol {
            font-size: 8rem;
            line-height: 1;
            color: #ffbf00; /* Deep Saffron/Amber */
            text-shadow: 0 4px 6px rgba(128, 0, 0, 0.4);
            animation: pulse 4s infinite ease-in-out;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
        .input-area {
            min-height: 150px;
            background-color: #fff8e8;
            border: 2px solid #ffbf00;
            transition: all 0.3s;
        }
        .input-area:focus {
            border-color: #800000;
            box-shadow: 0 0 0 3px rgba(128, 0, 0, 0.2);
        }
        .seek-button {
            background-color: #800000; /* Deep Maroon */
            transition: background-color 0.3s, transform 0.1s;
        }
        .seek-button:hover {
            background-color: #a02040;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(128, 0, 0, 0.3);
        }
        .loading-bar {
            overflow: hidden;
            height: 4px;
            background-color: #ffbf0050;
            border-radius: 2px;
        }
        .loading-bar-inner {
            width: 100%;
            height: 100%;
            background-color: #800000;
            animation: loading-animation 1.5s infinite linear;
            transform-origin: left;
        }
        @keyframes loading-animation {
            0% { transform: translateX(-100%) scaleX(0); }
            50% { transform: translateX(0) scaleX(1); }
            100% { transform: translateX(100%) scaleX(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="moksha-container">
        
        <header class="text-center mb-8">
            <div class="om-symbol mx-auto" aria-hidden="true">‡•ê</div>
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Moksha AI</h1>
            <p class="text-lg text-gray-600">A Universal Dharma Guide</p>
            <p class="text-sm text-gray-500 mt-1">Built by **Jaiprakash Thakur**</p> 
        </header>

        <main>
            <div id="chat-output" class="mb-6 p-4 bg-gray-50 rounded-lg h-96 overflow-y-auto border border-gray-200">
                <p class="text-gray-500">Welcome to Moksha AI. I specialize in Sanatana, Buddhist, Jain, and Sikh philosophies. How may I assist your path of inquiry?</p>
            </div>

            <div class="flex flex-col space-y-4">
                
                <div class="flex justify-end items-center space-x-2">
                    <label for="language-selector" class="text-sm font-medium text-gray-700">Choose Reply Language:</label>
                    <select id="language-selector" class="p-2 border border-gray-300 rounded-lg text-gray-700 focus:ring-maroon-600 focus:border-maroon-600">
                        <option value="English">English (Default)</option>
                        <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                        <option value="Sanskrit">‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç (Sanskrit)</option>
                        <option value="Tamil">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                        <option value="Bengali">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                    </select>
                </div>
                <textarea id="user-input" class="input-area p-4 rounded-lg focus:outline-none resize-none text-gray-700" placeholder="Ask a question about Sanatana Dharma, the Buddha, Jainism, or Sikhism..."></textarea>
                
                <div id="loading-indicator" class="loading-bar hidden">
                    <div class="loading-bar-inner"></div>
                </div>

                <button id="seek-button" class="seek-button text-white font-bold py-3 rounded-lg shadow-md hover:shadow-xl focus:outline-none">
                    Seek Truth (Dharma Inquiry)
                </button>
            </div>
        </main>
    </div>

    <script>
        // 1. **CRITICAL SECURITY NOTE:** Replace this with your actual key
        const API_KEY = "AIzaSyC4UTFOHmR6kLQN-iks4USfOu41GFWOwJY"; // üõë PASTE YOUR CORRECT, ACTIVE KEY HERE!
        const MODEL_NAME = "gemini-2.5-flash"; 

        // 2. **THE DHARMA GUARDRAIL (System Prompt) - Now includes a placeholder for the language rule**
        const BASE_SYSTEM_INSTRUCTION = `
            You are a specialized AI named Moksha AI, a Universal Dharma Guide.
            Your sole function is to provide information and philosophical insights
            related to the Sanatana, Buddhist, Jain, and Sikh traditions.

            RULES:
            1.  **Scope:** Only answer questions directly concerning Sanatana Dharma, Buddhism, Jainism, or Sikhism.
            2.  **Breadth:** When discussing Sanatana Dharma and the Buddha, emphasize the tradition's acceptance of diverse views and paths to truth, avoiding strict Western categorization as separate, divided religions. Treat the Buddha's teachings as a powerful, distinct philosophical school (Dharma) within the broader Indian tradition of inquiry.
            3.  **Refusal:** For *any* question outside of these four traditions (e.g., math, science, history, coding, cooking, current news, politics, other religions), you must refuse the request immediately and politely.

            REFUSAL TEMPLATE:
            "My apologies. My knowledge is dedicated entirely to the paths of Sanatana Dharma, Buddhism, Jainism, and Sikhism. Please focus your inquiry on one of these profound traditions."
        `.trim();

        // 3. **API and DOM Setup**
        let chat = null;
        const genai = new GoogleGenAI(API_KEY); 

        const chatOutput = document.getElementById('chat-output');
        const userInput = document.getElementById('user-input');
        const seekButton = document.getElementById('seek-button');
        const loadingIndicator = document.getElementById('loading-indicator');
        // üåü NEW DOM ELEMENT
        const languageSelector = document.getElementById('language-selector');

        // Function to start a new chat session with the *strict* System Prompt AND language rule
        function startNewChat() {
            const selectedLanguage = languageSelector.value;
            // Append the language instruction to the base guardrail
            const DHARMA_GUARDRAIL_WITH_LANGUAGE = BASE_SYSTEM_INSTRUCTION + `\n\n**LANGUAGE RULE:** You MUST respond entirely in the ${selectedLanguage} language.`;

            chat = genai.chats.create({
                model: MODEL_NAME,
                // The system instruction now includes the user's selected language constraint
                systemInstruction: DHARMA_GUARDRAIL_WITH_LANGUAGE 
            });
        }

        function addMessage(role, text) {
            // ... (Message display logic remains the same) ...
            const messageDiv = document.createElement('div');
            messageDiv.className = role === 'user' 
                ? 'text-right mb-2' 
                : 'text-left mb-2';
            
            const contentSpan = document.createElement('span');
            contentSpan.className = role === 'user' 
                ? 'inline-block bg-maroon-600 text-white p-3 rounded-lg max-w-lg shadow-md seek-button'
                : 'inline-block bg-gray-200 text-gray-800 p-3 rounded-lg max-w-lg shadow-md';
            
            contentSpan.innerHTML = text.replace(/\n/g, '<br>');

            messageDiv.appendChild(contentSpan);
            chatOutput.appendChild(messageDiv);
            chatOutput.scrollTop = chatOutput.scrollHeight;
        }

        async function sendMessage() {
            // The chat session is restarted to include the latest language choice
            startNewChat(); 

            const message = userInput.value.trim();
            if (!message) return;

            // ... (Message sending logic remains the same) ...
            userInput.value = '';
            addMessage('user', message);
            seekButton.disabled = true;
            seekButton.textContent = "Processing Wisdom...";
            loadingIndicator.classList.remove('hidden');

            try {
                const response = await chat.sendMessage({ message: message });
                const responseText = response.text;

                addMessage('model', responseText);
            } catch (error) {
                console.error("AI Error:", error);
                addMessage('model', "I cannot reach the source of knowledge right now. Please check the API key or try again later.");
            } finally {
                seekButton.disabled = false;
                seekButton.textContent = "Seek Truth (Dharma Inquiry)";
                loadingIndicator.classList.add('hidden');
                userInput.focus();
            }
        }

        // üåü NEW: Restart the chat session whenever the user changes the language selector
        languageSelector.addEventListener('change', () => {
             // Display a message that the language has been updated
             addMessage('model', `Reply language has been set to **${languageSelector.value}**.`);
        });


        // Event Listeners
        seekButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize the chat on load
            startNewChat();
        });

    </script>
</body>
</html>
Key Changes Explained
HTML Element Added: We added a new <select> drop-down menu with the ID language-selector to the main section:

HTML

<select id="language-selector" ...>
    <option value="English">English (Default)</option>
    <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
    ...
</select>
